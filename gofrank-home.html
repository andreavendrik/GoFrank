<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="gofrank-tile.html">
<link rel="import" href="gofrank-logo.html">
<link rel="import" href="gofrank-switch-button.html">

<dom-module id="gofrank-home">
  <template>
    <style>
      :host {
        display: block;
        position:relative;
      }

      body {
        margin:0;
      }

      #section-wrapper {
        width:100%;
        padding: 16px;
        box-sizing:border-box;
        background-color: rgba(255,255,255,1);
        position: relative;
        margin:auto;
      }

      @media only screen and (min-width: 375px) {
        #section-wrapper {
          width:90%;
          border-radius:10px;   
          padding:8px;       
        }
      }      

      @media only screen and (min-width: 768px) {
        #section-wrapper {
          margin: 16px auto;
          width: 720px;
          padding: 24px;
        }
      }

      section {
        box-sizing: border-box;
        width: 800px;
        max-width: 100%;
        margin: 0 auto;
        text-align: center;
      }

      #background-img {
        position: fixed;
        left: 0;
        bottom: 0px;
        width: 100%;
        object-position: center;
        z-index: 0;
        display: block;
      }

      #intro {
        @apply --body-font-mobile;
        margin: 0 auto 16px
        background-color: white;
      }

      #intro article br {
        display: none;
      }

      @media only screen and (min-width: 375px) {
        #intro article br {
          display:block;
        }
      }

      #intro article {
        @apply --gofrank-font-small;
        padding:32px 0 0;
        box-sizing:border-box;
      }

      @media only screen and (min-width: 768px) {
        #intro article {
          @apply --gofrank-font-body;
          margin:16px auto 48px;
        }
      }

      gofrank-logo {
        width: 150px;
        margin: auto;
      }
      @media only screen and (min-width: 768px) {
        gofrank-logo {
          width:200px;
        }
      }

      #categories {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        margin: 32px auto 8px;
      }

      @media only screen and (min-width: 768px) {
        #categories {
          grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
          margin: 24px auto 12px;
        }
      }

      .child {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        transform-origin: 50% 50%;
        width:100%;
        height: 90px;
        margin:auto;
      }

      @media only screen and (min-width: 375px) {
        .child {
          height:100px;
        }
      } 
      @media only screen and (min-width: 768px) {
        .child {
          height:120px;
        }
      }  

      @media only screen and (max-width: 767px) {
        .child:nth-child(1),
        .child:nth-child(2),
        .child:nth-child(3) {
          border-bottom: 1px solid var(--gofrank-lightgray);
        }

        .child:nth-child(7),
        .child:nth-child(8),
        .child:nth-child(9) {
          border-top: 1px solid var(--gofrank-lightgray);
        }

        .child:nth-child(1),
        .child:nth-child(4),
        .child:nth-child(7) {
          border-right: 1px solid var(--gofrank-lightgray);
        }

        .child:nth-child(3),
        .child:nth-child(6),
        .child:nth-child(9) {
          border-left: 1px solid var(--gofrank-lightgray);
        }
      }

      @media only screen and (min-width: 768px) {
        .child:nth-child(1),
        .child:nth-child(2),
        .child:nth-child(3),
        .child:nth-child(4),
        .child:nth-child(5) {
          border-bottom: 1px solid var(--gofrank-lightgray);
        }

        .child:nth-child(1),
        .child:nth-child(2),        
        .child:nth-child(3),
        .child:nth-child(4),        
        .child:nth-child(6),
        .child:nth-child(7),
        .child:nth-child(8),
        .child:nth-child(9) {
          border-right: 1px solid var(--gofrank-lightgray);
        }
      }

    </style>

    <img id="background-img" src="../images/gf-background-home-2.jpg">

    <div id="section-wrapper">

      <section id="intro">
        <gofrank-logo></gofrank-logo>
        <article>We are your guide towards a clean wardrobe. <br>What can we help you look for?</article>
        <gofrank-switch-button options='["Men", "All", "Women"]' selected="All"></gofrank-switch-button>
      </section>

      <section id="categories">
        <dom-repeat items="[[categories]]" as="category">
          <template>
            <gofrank-tile
              icon="[[category]]"
              class="child"
              on-click="_handleTileTap"
            ></gofrank-tile>
          </template>
        </dom-repeat>
      </section>

    </div>

  </template>

  <script>
    /**
     * `gofrank-home`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/gofrank-home.html
     */
    class GofrankHome extends Polymer.Element {
      static get is() { return 'gofrank-home'; }
      static get properties() {
        return {
          categories: {
            type: Array,
            value: [
              'shirts',
              'sweaters',
              'bottoms',
              'dresses',
              'accessories',
              'outerwear',
              'underwear',
              'bags',
              'shoes'
            ]
          },
        };
      }

      _handleTileTap(evt) {
        // var img = evt.target.shadowRoot.querySelector('img');
        // var imgBounds = img.getBoundingClientRect();

        // var clone = img.cloneNode(true);
        // clone.style.transformOrigin = '50% 50%!important';
        // clone.style.transform = 'scale(1.1)';
        // clone.style.position = 'absolute';
        // clone.style.zIndex = 1;
        // clone.style.top = imgBounds.top + 'px';
        // clone.style.left = imgBounds.left + 'px';
        // clone.style.width = imgBounds.width + 'px';
        // clone.style.height = imgBounds.height + 'px';
        // clone.style.transition = '0.6s all ease';
        // window.document.body.appendChild(clone);

        // window.setTimeout(() => {
        //   window.requestAnimationFrame(() => {
        //     clone.style.left = `50%`;
        //     clone.style.top = '18px';
        //     clone.style.transform = 'scale(1.25) translateX(-50%)';
        //   })
        // }, 0);

        // this.dispatchEvent(new CustomEvent('tile-tap', {detail: {icon: evt.target.icon}}));

      }

    }

    window.customElements.define(GofrankHome.is, GofrankHome);
  </script>
</dom-module>
